<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸª™ æ¥é‡‘å¸ - Coin Catcher</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
        }
        .header {
            text-align: center;
            padding: 20px;
            color: white;
        }
        .header h1 {
            font-size: 2em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stats {
            display: flex;
            gap: 40px;
            margin: 10px 0;
            color: white;
            font-size: 1.2em;
        }
        .stats span {
            background: rgba(255,255,255,0.1);
            padding: 8px 20px;
            border-radius: 20px;
        }
        #gameCanvas {
            border: 3px solid rgba(102, 126, 234, 0.5);
            border-radius: 10px;
            background: rgba(0,0,0,0.3);
            cursor: none;
        }
        .controls {
            margin-top: 20px;
            display: flex;
            gap: 15px;
        }
        button {
            padding: 12px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: white;
            text-decoration: none;
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 20px;
            transition: all 0.3s;
        }
        .back-link:hover {
            background: rgba(255,255,255,0.2);
        }
        .instructions {
            color: rgba(255,255,255,0.6);
            margin-top: 15px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <a href="../index.html" class="back-link">â† è¿”å›æ¸¸æˆä¸­å¿ƒ</a>
    
    <div class="header">
        <h1>ğŸª™ æ¥é‡‘å¸ Coin Catcher</h1>
        <div class="stats">
            <span>åˆ†æ•°: <strong id="score">0</strong></span>
            <span>æœ€é«˜åˆ†: <strong id="highScore">0</strong></span>
            <span>ç”Ÿå‘½: <strong id="lives">â¤ï¸â¤ï¸â¤ï¸</strong></span>
        </div>
    </div>
    
    <canvas id="gameCanvas" width="600" height="500"></canvas>
    
    <p class="instructions">ğŸ–±ï¸ ç§»åŠ¨é¼ æ ‡æˆ–ä½¿ç”¨ â† â†’ æ–¹å‘é”®æ§åˆ¶ç¯®å­æ¥ä½é‡‘å¸ï¼</p>
    
    <div class="controls">
        <button class="btn-primary" id="startBtn" onclick="startGame()">ğŸ® å¼€å§‹æ¸¸æˆ</button>
        <button class="btn-secondary" onclick="resetGame()">ğŸ”„ é‡æ–°å¼€å§‹</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // æ¸¸æˆçŠ¶æ€
        let gameRunning = false;
        let score = 0;
        let highScore = localStorage.getItem('coinGameHighScore') || 0;
        let lives = 3;
        let gameSpeed = 3;
        
        // ç¯®å­
        const basket = {
            x: canvas.width / 2 - 50,
            y: canvas.height - 60,
            width: 100,
            height: 30,
            speed: 8,
            dx: 0
        };
        
        // é‡‘å¸æ•°ç»„
        let coins = [];
        let goldCoins = [];
        let diamonds = [];
        let bombs = [];
        
        // æ›´æ–°æœ€é«˜åˆ†æ˜¾ç¤º
        document.getElementById('highScore').textContent = highScore;
        
        // é”®ç›˜æ§åˆ¶
        let keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === ' ' && !gameRunning) startGame();
        });
        document.addEventListener('keyup', (e) => keys[e.key] = false);
        
        // é¼ æ ‡æ§åˆ¶
        canvas.addEventListener('mousemove', (e) => {
            if (!gameRunning) return;
            const rect = canvas.getBoundingClientRect();
            basket.x = e.clientX - rect.left - basket.width / 2;
            basket.x = Math.max(0, Math.min(canvas.width - basket.width, basket.x));
        });
        
        function spawnCoin() {
            const types = ['gold', 'gold', 'gold', 'diamond', 'bomb'];
            const type = types[Math.floor(Math.random() * types.length)];
            const size = type === 'diamond' ? 15 : type === 'bomb' ? 20 : 12;
            const speed = gameSpeed + Math.random() * 2;
            
            const item = {
                x: Math.random() * (canvas.width - size * 2) + size,
                y: -size,
                size: size,
                speed: speed,
                type: type,
                rotation: 0,
                rotationSpeed: (Math.random() - 0.5) * 0.2
            };
            
            if (type === 'gold') goldCoins.push(item);
            else if (type === 'diamond') diamonds.push(item);
            else if (type === 'bomb') bombs.push(item);
        }
        
        function drawBasket() {
            // ç¯®å­ä¸»ä½“
            ctx.fillStyle = '#8B4513';
            ctx.beginPath();
            ctx.moveTo(basket.x, basket.y);
            ctx.lineTo(basket.x + 10, basket.y + basket.height);
            ctx.lineTo(basket.x + basket.width - 10, basket.y + basket.height);
            ctx.lineTo(basket.x + basket.width, basket.y);
            ctx.closePath();
            ctx.fill();
            
            // ç¯®å­è¾¹ç¼˜
            ctx.strokeStyle = '#D2691E';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // ç¯®å­çº¹ç†
            ctx.strokeStyle = '#A0522D';
            ctx.lineWidth = 2;
            for (let i = 0; i < 4; i++) {
                ctx.beginPath();
                ctx.moveTo(basket.x + 15 + i * 20, basket.y);
                ctx.lineTo(basket.x + 15 + i * 18, basket.y + basket.height);
                ctx.stroke();
            }
        }
        
        function drawCoin(coin, x, y) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(coin.rotation);
            
            // é‡‘å¸
            if (coin.type === 'gold') {
                const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, coin.size);
                gradient.addColorStop(0, '#FFD700');
                gradient.addColorStop(0.5, '#FFA500');
                gradient.addColorStop(1, '#FF8C00');
                
                ctx.beginPath();
                ctx.arc(0, 0, coin.size, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();
                ctx.strokeStyle = '#FFD700';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                ctx.fillStyle = '#B8860B';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('$', 0, 0);
            }
            // é’»çŸ³
            else if (coin.type === 'diamond') {
                ctx.beginPath();
                ctx.moveTo(0, -coin.size);
                ctx.lineTo(coin.size, 0);
                ctx.lineTo(0, coin.size);
                ctx.lineTo(-coin.size, 0);
                ctx.closePath();
                
                const gradient = ctx.createLinearGradient(-coin.size, -coin.size, coin.size, coin.size);
                gradient.addColorStop(0, '#00FFFF');
                gradient.addColorStop(0.5, '#00CED1');
                gradient.addColorStop(1, '#20B2AA');
                ctx.fillStyle = gradient;
                ctx.fill();
                ctx.strokeStyle = '#00FFFF';
                ctx.lineWidth = 2;
                ctx.stroke();
            }
            // ç‚¸å¼¹
            else if (coin.type === 'bomb') {
                ctx.beginPath();
                ctx.arc(0, 0, coin.size, 0, Math.PI * 2);
                ctx.fillStyle = '#333';
                ctx.fill();
                
                // ç‚¸å¼¹å¼•ä¿¡
                ctx.fillStyle = '#8B0000';
                ctx.beginPath();
                ctx.arc(0, -5, 5, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.strokeStyle = '#FF0000';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, -10);
                ctx.quadraticCurveTo(5, -20, 10, -15);
                ctx.stroke();
                
                // ç‚¸å¼¹è¡¨æƒ…
                ctx.fillStyle = 'white';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('ğŸ’£', 0, 2);
            }
            
            ctx.restore();
        }
        
        function drawBackground() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        
        function checkCollision(item) {
            return item.x > basket.x && 
                   item.x < basket.x + basket.width &&
                   item.y + item.size > basket.y &&
                   item.y - item.size < basket.y + basket.height;
        }
        
        function update() {
            if (!gameRunning) return;
            
            // é”®ç›˜ç§»åŠ¨
            if (keys['ArrowLeft'] || keys['a']) basket.x -= basket.speed;
            if (keys['ArrowRight'] || keys['d']) basket.x += basket.speed;
            basket.x = Math.max(0, Math.min(canvas.width - basket.width, basket.x));
            
            // æ›´æ–°æ‰€æœ‰ç‰©å“
            [...goldCoins, ...diamonds, ...bombs].forEach(item => {
                item.y += item.speed;
                item.rotation += item.rotationSpeed;
            });
            
            // æ£€æŸ¥æ¥ä½
            goldCoins = goldCoins.filter(coin => {
                if (checkCollision(coin)) {
                    score += 10;
                    document.getElementById('score').textContent = score;
                    // åŠ é€Ÿ
                    if (score % 100 === 0) gameSpeed += 0.5;
                    return false;
                }
                return coin.y < canvas.height + 20;
            });
            
            diamonds = diamonds.filter(diamond => {
                if (checkCollision(diamond)) {
                    score += 50;
                    document.getElementById('score').textContent = score;
                    return false;
                }
                return diamond.y < canvas.height + 20;
            });
            
            bombs = bombs.filter(bomb => {
                if (checkCollision(bomb)) {
                    lives--;
                    updateLives();
                    if (lives <= 0) gameOver();
                    return false;
                }
                return bomb.y < canvas.height + 40;
            });
            
            // æ‰è½æœªæ¥ä½
            goldCoins = goldCoins.filter(coin => coin.y < canvas.height + 20);
            diamonds = diamonds.filter(diamond => diamond.y < canvas.height + 20);
            bombs = bombs.filter(bomb => bomb.y < canvas.height + 40);
        }
        
        function updateLives() {
            document.getElementById('lives').textContent = 'â¤ï¸'.repeat(lives);
        }
        
        function draw() {
            drawBackground();
            drawBasket();
            goldCoins.forEach(coin => drawCoin(coin, coin.x, coin.y));
            diamonds.forEach(diamond => drawCoin(diamond, diamond.x, diamond.y));
            bombs.forEach(bomb => drawCoin(bomb, bomb.x, bomb.y));
        }
        
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
        
        function spawnItems() {
            if (!gameRunning) return;
            spawnCoin();
            const interval = Math.max(500, 1500 - score);
            setTimeout(spawnItems, interval);
        }
        
        function startGame() {
            if (gameRunning) return;
            gameRunning = true;
            // ä¸é‡ç½®åˆ†æ•°ï¼Œåªé‡ç½®æ¸¸æˆç‰©å“
            goldCoins = [];
            diamonds = [];
            bombs = [];
            gameSpeed = 3;
            basket.x = canvas.width / 2 - basket.width / 2;
            document.getElementById('startBtn').textContent = 'â¸ï¸ æ¸¸æˆä¸­...';
            spawnItems();
        }
        
        function resetGame() {
            gameRunning = false;
            score = 0;
            lives = 3;
            gameSpeed = 3;
            goldCoins = [];
            diamonds = [];
            bombs = [];
            basket.x = canvas.width / 2 - basket.width / 2;
            document.getElementById('score').textContent = score;
            updateLives();
            document.getElementById('startBtn').textContent = 'ğŸ® å¼€å§‹æ¸¸æˆ';
            
            // é‡ç»˜èƒŒæ™¯
            drawBackground();
            drawBasket();
        }
        
        function gameOver() {
            gameRunning = false;
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('coinGameHighScore', highScore);
                document.getElementById('highScore').textContent = highScore;
            }
            
            // æ¸¸æˆç»“æŸç”»é¢
            ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#FFD700';
            ctx.font = 'bold 40px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('ğŸ† æ¸¸æˆç»“æŸ!', canvas.width / 2, canvas.height / 2 - 40);
            
            ctx.fillStyle = 'white';
            ctx.font = '30px Arial';
            ctx.fillText(`å¾—åˆ†: ${score}`, canvas.width / 2, canvas.height / 2 + 20);
            
            ctx.font = '20px Arial';
            ctx.fillStyle = '#00FFFF';
            ctx.fillText(`æœ€é«˜åˆ†: ${highScore}`, canvas.width / 2, canvas.height / 2 + 60);
            
            document.getElementById('startBtn').textContent = 'ğŸ”„ å†æ¥ä¸€æ¬¡';
        }
        
        // å¯åŠ¨æ¸¸æˆå¾ªç¯
        gameLoop();
    </script>
</body>
</html>
